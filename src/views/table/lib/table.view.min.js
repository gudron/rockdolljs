!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("backbone.marionette"),require("underscore"),require("backbone"),require("moment"));else if("function"==typeof define&&define.amd)define(["backbone.marionette","underscore","backbone","moment"],t);else{var i="object"==typeof exports?t(require("backbone.marionette"),require("underscore"),require("backbone"),require("moment")):t(e["backbone.marionette"],e.underscore,e.backbone,e.moment);for(var l in i)("object"==typeof exports?exports:e)[l]=i[l]}}(this,function(e,t,i,l){return function(e){function t(l){if(i[l])return i[l].exports;var s=i[l]={i:l,l:!1,exports:{}};return e[l].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,l){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:l})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),n=l(s),r=i(1),o=l(r),d=o.default.ItemView.extend({tagName:"td",template:!1,model:!1,initialize:function(e){n.default.extend(this,e)},onBeforeDestroy:function(){this.cellOptions=!1}});t.default=d},function(e,t){e.exports=require("backbone.marionette")},function(e,t){e.exports=require("underscore")},function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),n=l(s),r=i(4),o=l(r),d=i(6),a=l(d),u=i(14),f=l(u),c=i(15),h=l(c),p=i(16),b=l(p),m=i(17),v=l(m),w=n.default.ItemView.extend({tagName:"tr",childView:o.default,template:!1,childViewOptions:{tagName:"td"},_cellTypes:{link:a.default,checkbox:f.default,tumbler:h.default,text:o.default,active:b.default,date:v.default},cells:[],fields:{},initialize:function(){this.fields=this.getOption("fields"),this.template=this.getOption("template"),this.cells={}},modelEvents:{change:"_changed"},onRender:function(){var e=this,t=this.model.get("id");if(e.template){var i=e.template(e.model.toJSON());e.$el.append(i)}else _.each(e.fields,function(t,i){var l=i;_.contains(_.keys(e._cellTypes),t.type)?e.childView=e._cellTypes[t.type]:e.childView=_.isUndefined(t.view)?o.default:t.view;var s=_.extend(e.childViewOptions,t,{value:e.model.get(l),rawValue:_.get(e.model.attributes,l),model:e.model}),n=new e.childView(s);n.render(),_.set(e.cells,l,n),e.$el.append(n.$el)});_.isUndefined(t)||this.$el.attr("data-id",t)},onBeforeDestroy:function(){var e=this;_.isObject(this.cells)&&_.each(e.fields,function(t,i){var l=_.get(e.cells,i);_.isUndefined(l)||(l.destroy(),_.set(e.cells,t,void 0))}),this.cells=null},_changed:function(){var e=this,t=this.model.changed;_.each(t,function(t,i){var l=_.get(e.cells,i);_.isUndefined(l)||l.render()})}});t.default=w},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(0),s=function(e){return e&&e.__esModule?e:{default:e}}(l),n=s.default.extend({render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this.$el.html(this.value),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this}});t.default=n},function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(3),n=l(s),r=i(4),o=l(r),d=i(19),a=l(d),u=n.default.extend({childView:a.default,_cellTypes:{text:o.default,head:a.default}});t.default=u},function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),n=l(s),r=i(0),o=l(r),d=o.default.extend({events:{"click a":"_linkClick"},render:function(){var e=$("<a>").text(this.value).attr("href",this.urlRoot+this.model.get("id"));return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this.$el.append(e),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this},_linkClick:function(e){e.preventDefault(),!n.default.isUndefined(this.clickCallback)&&n.default.isFunction(this.clickCallback)?this.clickCallback.call(this,e):App.router.navigate(this.urlRoot+this.model.get("id"),{trigger:!0})}});t.default=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(0),s=function(e){return e&&e.__esModule?e:{default:e}}(l),n=s.default.extend({attrName:null,referenceName:null,render:function(){var e=this.model.attributes[this.attrName],t=App.references[this.referenceName].get(e),i="";return _.isUndefined(t)||(i=t.get("t_name")),this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this.$el.html(i),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this}});t.default=n},function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),n=l(s),r=i(3),o=(l(r),i(4)),d=(l(o),n.default.LayoutView.extend({tagName:"tr",template:_.template('<th colspan="<%- th_colspan %>"><div class="app-table-filter"><div class="row"></div></div></th>'),attributes:{},cells:[],fields:{},initialize:function(){this.fields=this.getOption("fields"),this.filters=this.getOption("filters")},render:function(){return this.$el.html(this.template({th_colspan:_.size(this.fields)})),this}}));t.default=d},function(e,t,i){e.exports=i(10)},function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(11),n=i(2),r=l(n),o=i(12),d=l(o),a=i(1),u=l(a),f=i(13),c=l(f),h=i(8),_=l(h),p=i(20),b=l(p),m=i(21),v=l(m),w=i(0),g=l(w),V=i(4),y=l(V),k=i(7),x=l(k),M=i(6),O=l(M),C=i(3),$=l(C),I=i(5),j=l(I),N=u.default.LayoutView.extend({version:s.version,tagName:"table",className:"app-table",template:!1,labels:!1,collection:null,initialize:function(){var e=this.getOption("labels");e&&(this.labels=e),r.default.isFunction(this.labels)&&(this.labels=this.labels.call(this)),this.collection=this.getOption("collection"),this.getOption("footerView")&&(this._footerView=this.getOption("footerView")),r.default.isEmpty(this.fields)&&!r.default.isFunction(this.fields)?this.fields=r.default.result(this.options,"fields"):this.fields=r.default.result(this,"fields"),this.listenTo(this.labels,"fetch:success",this._renderHeader),this.listenTo(this.collection,"fetch:success",this._renderFooter),this.headerView=new this._headerView({fields:this.fields,filters:this.getOption("filters")}),this.footerView=new this._footerView({fields:this.fields,collection:this.collection})},filterView:!1,headerView:!1,_headerView:c.default,bodyView:!1,bodyViewRowTemplate:!1,footerView:!1,_footerView:v.default,hiddenAttributes:{},fields:{},onRender:function(){var e=this;this.bodyView=new b.default({collection:e.collection,fields:e.fields,bodyViewRowTemplate:e.bodyViewRowTemplate}),r.default.isNull(this.labels)||this.labels.isEmpty()||this._renderHeader(),this.bodyView.render(),this.$el.append(this.headerView.$el).append(this.bodyView.$el).append(this.footerView.$el)},_renderParts:function(e){this._renderHeader(e),this._renderFooter(e)},_renderHeader:function(e){this.headerView.collection=new d.default.Collection([this.labels]),this.headerView.render()},_renderFooter:function(e){this.footerView.render()},onBeforeDestroy:function(){this.headerView.destroy(),this.bodyView.destroy(),this.footerView.destroy(),this.collection.reset(null),this.labels.clear({silent:!0})}});N.cells={},N.cells.tableCommonCellView=g.default,N.cells.tableCellView=y.default,N.cells.tableReferenceCellView=x.default,N.cells.tableLinkCellView=O.default,N.layouts={},N.layouts.headView=c.default,N.layouts.filterView=_.default,N.layouts.bodyView=b.default,N.layouts.footerView=v.default,N.rows={},N.rows.rowView=$.default,N.rows.headRowView=j.default,t.default=N},function(e,t){e.exports={version:"0.0.4",buildDate:"2017-11-09"}},function(e,t){e.exports=require("backbone")},function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),n=l(s),r=i(5),o=l(r),d=i(8),a=l(d),u=n.default.CollectionView.extend({tagName:"thead",className:"app-table__header",childView:o.default,childViewOptions:{tagName:"tr",template:!1,fields:!1},template:!1,events:{},fields:{},filter:{},collection:!1,_defaultFieldType:"head",initialize:function(){var e=this,t=$.extend(!0,{},this.getOption("fields")),i=$.extend(!0,{},this.getOption("filters"));this.fields=t,this.filters=i,this.childViewOptions={},this.childViewOptions.fields=this.fields,_.each(this.childViewOptions.fields,function(t,i){t.type=e._defaultFieldType})},render:function(){var e=this;if(n.default.CollectionView.prototype.render.call(this),!_.isEmpty(this.filters)){var t=new a.default({fields:e.fields,filters:e.filters});t.render(),e.$el.prepend(t.$el)}},onBeforeAddChild:function(e){e.childViewOptions={tagName:"th"}},onBeforeDestroy:function(){this.fields=null,_.isUndefined(this.collection)||this.collection.reset(null)}});t.default=u},function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),n=l(s),r=i(0),o=l(r),d=o.default.extend({events:{"click .btn.btn--checkbox":"_onClickBtn"},render:function(){this._ensureViewIsIntact(),this.triggerMethod("before:render",this);var e=$("<button>").addClass("btn btn--checkbox");return this.$el.append(e),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this},_onClickBtn:function(e){var t=$(e.target);t.toggleClass("is-checked").closest("tr").toggleClass("is-checked"),e.preventDefault(),!n.default.isUndefined(this.clickCallback)&&n.default.isFunction(this.clickCallback)&&this.clickCallback.call(this,e)}});t.default=d},function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),n=l(s),r=i(0),o=l(r),d=o.default.extend({ui:{tumbler:".tumbler"},events:{"click @ui.tumbler":"_onChangeTumbler"},template:n.default.template('<input class="tumbler" id="table-cell-tumbler-<%- id_suffix %>" data-cid="<%- id_suffix %>" type="checkbox" <% if (is_checked) { %> checked <% } %> ><label for="table-cell-tumbler-<%- id_suffix %>" data-value-off="<%- t_global__tumbler_off_title %>" data-value-on="<%- t_global__tumbler_on_title %>"><span></span></label>'),render:function(){var e=this;return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this.$el.html(this.template({t_global__tumbler_off_title:App.t("global.tumbler_off_title"),t_global__tumbler_on_title:App.t("global.tumbler_on_title"),id_suffix:e.options.model.cid,is_checked:e.value})),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this},_toggleTumblerClass:function(e,t){t?e.removeClass("is-off").addClass("is-on"):e.removeClass("is-on").addClass("is-off")},_onChangeTumbler:function(e){var t=$(e.target);this._toggleTumblerClass(t,t.prop("checked")),!n.default.isUndefined(this.clickCallback)&&n.default.isFunction(this.clickCallback)&&this.clickCallback.call(this,e)}});t.default=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(7),s=function(e){return e&&e.__esModule?e:{default:e}}(l),n=s.default.extend({attrName:"active",referenceName:"activeStatuses"});t.default=n},function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(0),n=l(s),r=i(18),o=l(r),d=n.default.extend({render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),o.default.isMoment(this.value)&&this.$el.html(this.value.format(this.model._dateFormat)),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this}});t.default=d},function(e,t){e.exports=require("moment")},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(0),s=function(e){return e&&e.__esModule?e:{default:e}}(l),n=s.default.extend({render:function(){var e=$('<a href="#">');return e.addClass("data-table__sort-btn btn"),e.html(this.value),this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this.$el.html(e),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this}});t.default=n},function(e,t,i){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),n=l(s),r=i(3),o=l(r),d=n.default.CollectionView.extend({tagName:"tbody",className:"app-table__body",childView:o.default,childViewOptions:{template:!1,fields:!1},bodyViewRowTemplate:!1,events:{},fields:{},initialize:function(){this.fields=this.getOption("fields"),this.childViewOptions={},this.childViewOptions.fields=this.fields}});t.default=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(1),s=function(e){return e&&e.__esModule?e:{default:e}}(l),n=s.default.ItemView.extend({tagName:"tfoot",className:"app-table__footer",template:_.template('<tr><td colspan="<%- td_colspan %>"><%- empty_result_text %></td></tr>'),events:{},initialize:function(){},render:function(){0==_.size(this.getOption("collection"))?this.$el.html(this.template({td_colspan:_.size(this.getOption("fields")),empty_result_text:App.t("global.table_view_no_result")})):this.$el.empty()},onBeforeDestroy:function(){}});t.default=n}])});